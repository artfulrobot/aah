@import 'lib';

// This file whips CiviCRM's old classes into shape.

// Page {{{
body.page-civicrm {
  h1.page-header {
    display:none; // CiviCRM seems to output this anyways.
  }

  // Don't limit width in CiviCRM since it uses background-color on some headings which then look odd.
  h3, h4, h5 { max-width:none; }
  #page {
    padding-top: 1rem;
    padding-left: 1rem;
    padding-right: 1rem;
  }
}

// Provide some space at sides on angular pages at least.
body.page-civicrm-a #content {
  max-width: 1200px;
  margin-left:auto;
  margin-right:auto;
  padding-left: 1rem;
  padding-right: 1rem;
} // }}}
// Print stuff {{{
#printer-friendly,
.ui-button.crm-dialog-titlebar-print
{
  display:none; // It's never really printer friendly...
}
@media print {
  #civicrm-footer,
  #access,
  #civicrm-menu
  { display:none; }
  body.page-civicrm {
    padding-top:0;
  }
} // }}}


// Override: Aaah theme! {{{
#crm-container li { max-width: none; }
// }}}
// Override: Mosaico. {{{
#bootstrap-theme .crm-mosaico-template-item {
  display:flex;
  width:100%;
}
#bootstrap-theme .crm-mosaico-template-item .crm-mosaico-template-title-wrapper {
  height:unset;
  flex: 1 0 160px;
}
#bootstrap-theme .crm-mosaico-template-item .crm-mosaico-template-image-wrapper {
  flex: 0 0 160px;
} // }}}
// Override: CiviCRM override default general styles {{{
#civicrm-menu, #root-menu-div ul,
.ui-widget {
  font-family: Lato;
}
.ui-widget {
  font-size:1em; // disable 1.1
}
// h3s are used throughout
.crm-container h3 {
  background: transparent;
  margin: 2.5rem 0 0.5rem;
  font-size: (20rem/16);
}
.crm-i-green {
  color: $colourGreenStrongBg;
}

.crm-i-red {
  color: $colourRedDanger;
}

.crm-i-blue {
  color: $colourArtfulDarkBlue;
}

#crm-container div#alpha-filter {
  background-color: $colourWidgetBackground;
  padding: 0.25rem 1rem;
}

// Remove extra icons not needed
.crm-action-menu::before {
  display: none;
}
// }}}
// Override: Bootstrap {{{
.label { color:inherit; }
// Bootstrap says all .labels should be inline but CiviCRM uses the class on td...
td.label { display: table-cell; }
// Tame headings in panels.
.panel-heading {
  h1, h2, h3 { margin: 0; }
}
// }}}
// Override: jQuery UI {{{
.ui-widget-header {
  background:$colourWidgetBackground;
  border:none;
}
.ui-state-default,
.ui-widget-content .ui-state-default,
.ui-widget-header .ui-state-default {
  background:$colourWidgetBackground;
  border:none;
  border-radius: 0;
  &:hover {
    background: $colourSubtleHoverLightBlueGrey;
  }
}
.ui-state-default a,
.ui-state-default a:link,
.ui-state-default a:visited,
a.ui-button,
a:link.ui-button,
a:visited.ui-button,
.ui-button {
  color: inherit;
  margin-right: 0;
  border: none;
}


.ui-state-active,
.ui-widget-content .ui-state-active,
.ui-widget-header .ui-state-active {
  background:$colourWidgetBackground;
  border:none;
  border-radius: 0;
  background: $colourWidgetSelectedBackground;
  &:hover {
    background: $colourSubtleHoverLightBlueGrey;
  }
  color: $colourArtfulBrightBlue;
  a:link, a:visited {
    color: $colourArtfulBrightBlue;
  }
}
.ui-state-hover,
.ui-widget-content .ui-state-hover,
.ui-widget-header .ui-state-hover,
.ui-state-focus,
.ui-widget-content .ui-state-focus,
.ui-widget-header .ui-state-focus,
.ui-button:hover,
.ui-button:focus {
  background: #127fd4; // @todo what colour?
  color: inherit;
  border: none;
}

.ui-state-active,
.ui-widget-content .ui-state-active,
.ui-widget-header .ui-state-active,
a.ui-button:active,
.ui-button:active,
.ui-button.ui-state-active:hover {
  background: #127fd4; // @todo what colour?
}
// }}}
// Override: Case {{{
.crmCaseType tr.addRow td {
  background: $colourSubtleHoverLightBlueGrey border-box !important;
}
// }}}
// Component: Actions ribbon (e.g. at top of Contact screen) and .action-link which seems to be very similar {{{
.crm-actions-ribbon {
  &>ul {
    margin: 1rem 0;
    padding: 0;
    li {
      list-style: none;
      display: inline-block;
      margin-right: 1rem;
    }
  }
}
// Until Javascript sets display: block, hide the actions popup.
#crm-contact-actions-list { display: none; }
.action-link {
  margin: 1rem 0;
  a {
    margin-right: 1rem;
  }
}

//}}}
// Component: Accordians (various types). {{{
.crm-accordion-wrapper {
  margin-bottom: 1rem;
  border-bottom: solid 1px $colourFormElementsBorder;

  &.collapsed .crm-accordion-body { display: none; }
}

// 2 dashboard.css overrides
#crm-container .widget-content .crm-accordion-wrapper.collapsed .crm-accordion-header,
#crm-container .widget-content .crm-accordion-header {
  background-image: none !important;
}
// Generally we don't need such specificity
.crm-accordion-header {
  padding: 0.5rem 1rem 0.5rem 2.5rem;
  background-color: $colourBlueGrey;
  color: $colourArtfulDarkBlue;
  transition: background-color 0.2s;
  cursor: pointer;

  &.active {
    background-color: mix($colourArtfulBrightBlueHigh, $colourArtfulBrightBlue, 50%);
    color: $colourArtfulDarkBlue;
  }
  &:hover, &.active:hover {
    background-color: mix($colourArtfulBrightBlueHigh, $colourArtfulBrightBlue, 50%);
  }
}
.crm-accordion-header::before {
  content: "\F18E";
  font: normal normal normal 14px/1 FontAwesome;
  font-size: inherit;
  text-rendering: auto;
  display: block;
  position: absolute;
  margin-left: -1.5rem;
  margin-top: 0.25rem;
  -webkit-transition: -webkit-transform 0.3s;
  transition: -webkit-transform 0.3s;
  transition: transform 0.3s;
  transition: transform 0.3s, -webkit-transform 0.3s;
  -webkit-transform: rotateZ(90deg);
          transform: rotateZ(90deg);
}
#crm-container #civicrm-dashboard .widget-controls, // has own css, requires this specificity.
.crm-accordion-body {
  background: $colourSubtleHoverLightBlueGrey;
  padding: 1rem;
  border-radius: 0;
  border:none;
}
.crm-accordion-wrapper.collapsed .crm-accordion-header::before {
  -webkit-transform: none;
          transform: none;
}

// This is another sort of collapsible content
.crm-collapsible {
  position: relative;
  margin: 0.5rem 0;
  transition: background-color 0.2s;
  padding: 3rem 1rem 0.5rem; // 3rem to allow for absolutely positioned title.
  background-color: $colourSubtleHoverLightBlueGrey;

  &.collapsed {
    &>div { display:none; }
    &>.collapsible-title {
      display:block;
    }
  }
  .collapsible-title {
    color: $colourArtfulDarkBlue;
    cursor: pointer;
    position: absolute;
    top: 0.5rem;
    left: 0.5rem;
    border: none;
  }
}

// }}}
// Component: Buttons {{{

// Some buttons look like this:
// .crm-button
//   i.crm-i
//   input[type=submit]
.crm-button {
  position: relative;
  i {
    position: absolute;
    pointer-events: none;
    color: white;
    line-height: 1;
    left: 0.75rem;
    // Center vertically
    top: 50%;
    transform: translateY(-0.55rem);

  }

  // When it's a bootstrap button...
  &.btn i.crm-i {
    position: static;
    margin-right: 0.5em;
  }

  input.crm-form-submit,
  input[type="button"] {
    padding:0.25rem 1rem 0.25rem 2rem;
  }
}
button.crm-button,
input.crm-form-submit,
input[type="button"] {
  display:inline-block;
  background: $colourArtfulBrightBlue;
  padding:0.25rem 1rem;
  border:none;
  border-radius: 3px;
  color:white;
  text-shadow: none;
  // box-shadow: 0 0 6px rgba(0,0,0,0.2);
  box-shadow: none;

  &:hover {
    background-color: darken($colourArtfulBrightBlue, 10%);
  }
}
// Angular buttons specify an icon on the button with the crm-icon attr.
button.crm-button[crm-icon] {
  padding-left: 2.1rem;
}

// Link buttons
a.button,
a.button:link,
a.button:visited,
.ui-button,
.ui-dialog-buttonset .ui-button
{
  display:inline-block;
  padding:0.25rem 1rem;
  background: $colourArtfulBrightBlue;
  border:none;
  border-radius: 3px;
  color:white;
  text-shadow: none;
  box-shadow: 0 0 6px rgba(0,0,0,0.2);

  &:active,
  &:hover {
    background-color: darken($colourArtfulBrightBlue, 10%);
    text-decoration: none;
  }
}
// Sets of buttons.
.crm-inline-button,
.crm-submit-buttons {
  margin-bottom: 1rem;
  margin-top: 1rem;
  .crm-button { margin-right: 1rem; }
}
// Remove top margin from buttons when they're the first child of a td
td>.crm-submit-buttons:first-child {
  margin-top: 0;
}

// Buttons in title bars.
.ui-dialog-titlebar {
  .ui-dialog-titlebar-close, // This class is mis-used for various types of button.
  button, span.ui-button {
    border-radius: 0;
    background: transparent;
    border: solid 1px $colourArtfulBrightBlue;
    color: $colourArtfulBrightBlue;
    box-shadow: none;
    width: 1.6rem; // There's inline style attribute applied forcing positioning, so this is as wide as we can go.

    &:hover {
      background: rgba(255, 255, 255, 0.5);
      border: solid 1px $colourArtfulBrightBlue;
    }
  }
}

// 'more' buttons {{{
.btn-slide {
  position: relative;
  cursor:pointer;

  .panel {
    display: none;
    position: absolute;
    right: 0;
    width: 15rem;
    padding: 0;
    margin: 0;
    background: white;
    box-shadow: 0 0 6px rgba(0, 0, 0, 0.2);
    z-index: 1;
    li {
      list-style: none;
      font-size: 0.875rem;
      padding: 0;
      a {
        display: block;
        padding: 0.25rem 1rem;
        margin:0;
        text-decoration: none;
        &:hover {
          background: #e6edf2;
          text-decoration: none;
        }
      }
    }
  }
}
// }}}
// }}}
// Component: crm-hover-button {{{
// I think these can just be normal links, not sure what buttonising them does.
.crm-hover-button {
  display: inline-block;
  padding: 0 0.5rem;
  margin-right: 0.5rem;
}
// }}}
// Component: help {{{
.crm-container .help, .crm-container #help {
  padding: 1rem;
  border-radius: 0;
  border:none;
  background: $colourVeryLightBlue;
  border-left: 2rem solid $colourArtfulMutedBlue;
  font-size: 1rem;
  margin-bottom: 1rem;
  &::before {
    position: absolute;
    margin-left: -2.2rem;
    content: "\F0EB";
    font-size: 1.25rem;
    display: inline-block;
    font: normal normal normal 14px/1 FontAwesome;
    font-size: inherit;
    text-rendering: auto;
    color: white;
  }
}
// }}}
// Component: Fieldset {{{
#crm-container fieldset {
  padding-top: 3rem;
  position: relative;
  &>legend {
    position: absolute;
    top: 0.5rem;
    left: 1rem;
    border-style:none;
  }
}
// }}}
// Component: Form elements {{{
.crm-container {
  input[type="text"], input[type="password"], textarea {
    border-color: $colourFormElementsBorder;
  }
}
// Stop the labels butting right up against the tick boxes.
// Using padding so we don't create an unclickable gap.
.crm-form-checkbox,
.crm-form-radio {
  position: absolute;

  // Except where this is the only element.
  &:last-child {
    position: static;
  }

  &+label, &+.description {
    padding-left: 1.5rem;
  }
}
// I'm not sure what this is. {{{
.crm-section {
  display: flex;
  flex-wrap: wrap;

  &>.label {
    flex: 0 1 12rem;
    padding-right: 1rem;
    font-size: inherit;
    display: inline-block;
    text-align: right; // Bootstrap sets it center
  }
  &>.content {
    flex: 1 0 12rem;
    margin-right: 2rem;

    // Special treatment of radios, checkboxes.
    .crm-form-checkbox, .crm-form-radio {
      position: static;

      &+label {
        display: inline;
        margin-right: 4rem;
        padding-left: 0;
      }
    }
  }


} // }}}

// }}}
// Component: icon picker {{{
.crm-container a.crm-icon-picker-button {
  display: inline-block;
  min-width: 10em;
  height: 1.5rem;
  text-align: inherit;
  color: white;
}

#crmIconPicker a.ui-button {
  box-sizing: content-box;
  margin-bottom: 0.5rem;
  margin-right: 1rem;
  color: white !important;
}

.crm-container a.crm-icon-picker-button.ui-button-text-only .ui-button-text {
  padding: .4em .2em;
}


// }}}
// Component: sticky table heads. xxx probably want to tame this... {{{
thead tr:first-child {
	position: sticky;
	top: 2.6rem;
	z-index: 20;
} // }}}
// Component: Notifications - non popups {{{
div.status,
div.messages {
  background: $colourAmberLightBg;
  border: none;
  margin: 1rem 0;
  padding: 1rem;
  border-left: solid 2rem $colourAmberStrongBg;

  position: relative;

  // Hide unsightly image icon.
  img[alt="status"] { display:none; }
}

div.messages .icon {
  position: absolute;
  top: 1rem;
  left: -2rem;
  width: 2rem;
  text-align: center;
}

div.messages .icon.inform-icon::before {
  display: inline-block;
  content: "\F05A";
  font: normal normal normal 14px/1 FontAwesome;
  font-size: inherit;
  text-rendering: auto;
  color: white;
}
// }}}
// Component: Notifications - popups {{{
#crm-notification-container {
	min-width: 30rem;
	max-width: 45rem;
  color: $colourText;
  position: fixed;
  top: 3rem;
  right: 1rem;
  z-index: 100000;
}
// Close button
#crm-notification-container .ui-notify-message a.ui-notify-cross {
  position: absolute;
  top: 1rem;
  right: 1rem;
	float: none;
	font-size: 1rem;
	text-shadow: none;
	padding: 0.2rem 0.75rem;
	color: white;
  border: solid 1px white;
  border-radius: 2px;
  text-decoration: none;
  &:hover, &:active {
    background: rgba(255, 255, 255, 0.5);
    text-decoration: none;
  }
}

#crm-notification-container div.ui-notify-message-style {
	background: white;
  border-left: solid 4px $colourAmberStrongBg;
	box-shadow: -1rem 1rem 2rem rgba(0, 0, 0, 0.2);
}
// Special colours.
#crm-notification-container div.ui-notify-message-style {
  &.success {
    border-left-color: $colourGreenStrongBg;
    div.icon { color: white; }
    h1 { background-color: $colourGreenStrongBg; color: white; }
  }
  &.error {
    div.icon { color: white; }
    border-left-color: $colourRedDanger;
    h1 { background-color: $colourRedDanger; color: white; }
  }
}


#crm-notification-container div.ui-notify-message {
  position: relative;
	padding: 0;
  margin-bottom: 1rem;
	border-radius: 2px;
	max-height: calc(100vh - 45px);
	overflow: auto;
  color: $colourText;


  h1 {
    color: black;
    background: $colourAmberStrongBg;
    font-size: 1rem;
    margin:0;
    padding: 1rem 1rem 1rem 3rem;
    min-height: 3.7rem; // Sometimes it is empty.
  }
  .notify-content {
    padding: 1rem;
  }

}

// The ticks and other icons...
.crm-container div.ui-notify-message div.icon, .crm-status-icon {
	margin-right: 0; // override
  text-indent: 0;
  float:none;

  position: absolute;
  top:1rem;
  left:1rem;

  &::before {
    content:'\26A0';// Warning sign.
    content:'\270b'; // Hand up emoji
    display:block;
    width: 1.5rem;
    height: 1.5rem;
    text-align:center;
    color: white;
  }
}
.crm-container div.ui-notify-message.success div.icon, .crm-status-icon.success {
  &::before { content:'\2714'; } // Tick.
}

// }}}
// Component: Notifications - angular ajax {{{
// div.crm-status-box-outer[.status-success] (this seems to have its opacity managed by js)
//   div.crm-status-box-inner
//     div.crm-status-box-msg
.crm-status-box-outer {
  position: fixed;
  top: 0;
  right: 0;
  z-index: 100000;
  background: white;
  padding: 0.5rem 1rem;
  border-radius: 3px;
  min-width: 8rem;
  max-width: 13rem;
  text-align: center;

  &.status-success {
    background: $colourGreenStrongBg;
    .crm-status-box-msg { color: white; }
  }
  &.status-error {
    background: $colourRedDanger;
    .crm-status-box-msg { color: white; }
  }
}
.crm-status-box-msg {
  color: $colourArtfulDarkBlue;
}
// }}}
// Component: Radio inputs in [public] Profile forms {{{
.crm-profile .radio-wrapper { display:block; }
// }}}
// Component: Select 2 {{{
.select2-container .select2-choice {
	// background-color: $colourSubtleHoverLightBlueGrey;
	// background-color: $colourWidgetBackground;
	background-color: white;
	filter: none;
	background-image: none;
}
.select2-container .select2-choice .select2-arrow {
  width: 1.8rem;
	border-left: 1px solid #aaa;
  background-color: rgba(0,0,0,0.1);
  border-radius: 0;
	filter: none;
	background-image:none;
  text-align: center;
  b { width: 18px;display:inline-block; }
}
.select2-container .select2-choice,
.select2-container-multi .select2-choices {
  border-color: rgba(0,0,0,0.2);
  border-radius: 2px;
}
.select2-container .select2-choice abbr {
  top: 10px;
  right: 2.2rem;
}
.select2-container {
  min-width: 7rem;
}
.select2-container-multi {
  min-width: 14rem;
}
.select2-container .select2-choice {
  height: 2.25rem;
}
.select2-arrow,
.select2-chosen { padding: 0.25rem 0; }
.select2-container .select2-choice > .select2-chosen { margin-right: 2rem; }

// Row description is smaller secondary text
// it should be only shown when the drop-down is open.
.crm-select2-row-description {
  display:none;
}
.select2-results .crm-select2-row-description {
  display: block;
  font-size: (12rem/16);
  color: $colourMidGrey;
}

// When used with a bootstrap .form-control...
.form-control.select2-container {
  padding: 0;
  border:none;
}
// }}}
// Component: Summary links {{{
.crm-summary-link {
  display: inline-block;
  color: $colourArtfulDarkBlue;
  width: 2rem;
  height: 2rem;
}

.crm-summary-link .crm-icon {
  line-height: 2rem;
  font: normal normal normal 14px/1 FontAwesome;
  font-size: inherit;
  text-rendering: auto;
}

.crm-summary-link .crm-icon.Individual-icon::before {
  content: "\F2BD";
  display: inline-block;
}

.crm-summary-link .crm-icon.Organization-icon::before {
  content: "\F0F7";
  display: inline-block;
}

.crm-summary-link .crm-tooltip-wrapper {
  display: none;
  position: absolute;
  background: white;
  padding: 0 1rem;
  font-size: 1rem;
  z-index: 1;
  box-shadow: -1rem 1rem 2rem rgba(0, 0, 0, 0.2);
}

.crm-summary-link.crm-tooltip-active .crm-tooltip-wrapper {
  display: block;
} // }}}
// Component: Footer {{{
#civicrm-footer {
  margin-top: 5rem;
  text-align: center;
  font-size: (12rem/16);
  opacity: 0.8;
}
// Component: "Status" bit in the footer {{{
.status {

  &.crm-error {
    background: $colourRedDanger;
    border-radius: 2px;
    padding: 0 0.5rem;
    margin:0 0.5rem;
    color:white;
    a:link, a:visited {
      color:white;
    }
  }
}
// }}}
//}}}
// Component: help icon {{{
a.helpicon {
  &::before {
    font: normal normal normal 14px/1 FontAwesome;
    font-size: inherit;
    text-rendering: auto;
    content: "\F059";
    display:inline-block;
    line-height: 1;
    text-align:center;
    color: $colourArtfulBrightBlue;
  }
}
// }}}
// Component: Access keys {{{
#access {
  margin-top: 1rem;
  font-size: (14rem/16);
}
// }}}
// Component: Tabs (e.g. Contributions/Recurring Contributions) {{{

// Override the styles for the li.

// Some other CSS highlights the active li
.crm-container .ui-tabs .ui-tabs-nav li.ui-state-active {
  background: transparent;
  border-bottom: solid 2px $colourArtfulBrightBlue;
}

// This is the actual clickable tab:
.crm-container .crm-tab-button a,
.crm-container .ui-tabs .ui-tabs-nav li a
{
  padding: 0.5rem 1rem; // we have to use important because we're overriding another !important(!)
  em  {
        background: $colourArtfulBrightBlue;
        border-radius: 0.5rem;
        font-size: (13rem/16);
        padding: 0 0.3rem;
        color:white;
        font-style:normal;
        font-weight:bold;
        &:empty { display: none; }
  }
}
// @todo specify that ul!
.crm-container ul li.crm-tab-button {
  &.ui-state-active {
    background: none;
    border-bottom: solid 2px $colourArtfulBrightBlue;
  }
  // Bit of spacing before the count number.
  em {
    margin-left: 1rem;
    display: inline-block;
  }
}
// }}}
// Component: tables {{{
#crm-container table {
  border-collapse: collapse;
  td, th {
    padding: 0.5rem 1rem;
    background-clip: padding-box; // Stop Firefox drawing backgrounds over borders.
  }
  td {
    border: solid 1px $colourWidgetBorder;
  }
  th {
    background-color: $colourSubtleHoverLightBlueGrey;
    border: solid 1px $colourSubtleHoverLightBlueGreyTint;
  }
}
// }}}
// Component: table.form-layout {{{
#crm-container table.form-layout {
  width: 100%;
  th, td {
    padding: 0.25rem 0.5rem;
    border:none;
  }
} // }}}
// Component: table.form-layout-compressed {{{
#crm-container table.form-layout-compressed {
  width: 100%;
  th, td {
    padding: 0.25rem 0.5rem;
    border:none;
    font-size: (14rem/16);
  }
}
// }}}
// Component: table selector {{{
#crm-container table.selector {
  width: 100%;
  tr.disabled td { opacity: 0.35; }

  th,
  td {
    padding: 0.25rem 0.5rem;
    border: none;
    font-size: 0.875rem;

    &> .crm-form-checkbox {
      position: static;
    }
  }
}


// }}}
// Component: data tables {{{
.dataTables_wrapper .dataTables_paginate {

}
.dataTables_wrapper .dataTables_paginate .paginate_button {
  padding: 0 0.5rem;
  &.current,
  &.current:hover {
    border:none;
    border: solid 1px $colourArtfulBrightBlue;
    background-color: $colourVeryLightBlue;
    background-image: none;
  }
}
// Make the alternate row shading more subtle.
.crm-container .odd-row, .crm-container .odd, tbody.scrollContent {
  background-color: $colourWidgetBackground;
}
.crm-container .even-row, .crm-container .even, tbody.scrollContent tr.alternateRow {
	background-color: $colourWidgetBackgroundLightest;
}
.crm-container table.row-highlight tr.even-row:hover, .crm-container table.row-highlight tr.even:hover, .crm-container .even-row.crm-row-selected, .crm-container .even.crm-row-selected,
.crm-container table.row-highlight tr:hover, .crm-container .crm-row-selected {
  background-color: $colourSubtleHoverLightBlueGrey;
}
// }}}
// Functional class: hiddenElement {{{
// Used on the main CiviCRM dashboard page, not sure if it has more general use.
#crm-container .hiddenElement { display: none; }
// }}}
// Functional class: .prettyprint {{{
// Used on the APIv4 explorer
.prettyprint {
  white-space: pre-wrap;
}
// }}}

// Specific Page: Contact page {{{
.crm-summary-display_name {
  margin-top:1rem;
  font-size: (27rem/16);
  color: $colourArtfulDarkBlue;
}
// Inline clickable edit things {{{
.crm-inline-edit {
  position: relative;

  // The edit forms within:
  .crm-container-snippet {
    padding: 1rem;
    background:white;
    overflow: auto;
    max-width: 100%;
  }

  // content that comes up when you hover over an editable chunk of the contact page.
  .crm-edit-help {
    display:none;
    position: absolute;
    top: -1.4rem;
    left: -1px;
    height: 1.4rem;
    background: $colourWidgetBackground;
    padding: 0 1rem;
    line-height: 1.4rem;
    border:solid 1px $colourArtfulBrightBlue;
    border-bottom-style:none;
  }

  &:hover {
    outline: $colourArtfulBrightBlue solid 1px;
    .crm-edit-help {
      display:block;
    }
  }

} // }}}
// Main tabs (make 'em vertical) {{{
.crm-contact-page #mainTabContainer {
  display: grid;
  grid-template-columns: 12rem auto;
  padding:0;
  border:none;

  // The tabs {{{
  .crm-contact-tabs-list {
    padding:0;
    background-color: $colourSubtleHoverLightBlueGrey;
    border-left: solid 1px rgba(0,0,0,0.1);
    margin: 0;
    border-radius: 0;

    li.crm-tab-button {
      margin:0;
      background:none;
      display:block;
      float:none;
      top:0;
      margin-right:0;

      &:first-child {
        border-top:none;
      }

      a { float:none; }
      // This would be an accessibility fail, but as it happens you can't tab through the tabs anyway...

      //&:not(.ui-tabs-active)
      border-bottom: solid 1px rgba(0,0,0,0.05);
    }
    // This is the <a> element
    .ui-tabs-anchor {
      display:flex;
      align-items: center;
      padding: 0.5rem 1rem !important; // needs important as style being overridden uses it.

      &:focus {
        outline: none;
      }

      i { flex: 0 0 1.2rem; }
      span { flex: 1 1 auto; padding-left:1em; font-size: (14rem/16); }
      // Item count in Contact tabs
      em {
        flex: 0 0 auto;
        background: $colourArtfulDarkBlue;
        background: $colourArtfulBrightBlue;
        border-radius: 0.5rem;
        font-size: (13rem/16);
        padding: 0 0.3rem;
        color:white;
        font-style:normal;
        font-weight:bold;
      }
    }
    // Hide blob when there's a zero count
    .crm-count-, .crm-count-0 {
      em { display:none; }
    }
    // active / selected tab
    li.crm-tab-button.ui-state-active {
      background: $colourWidgetBackground; //xxx
      // border-bottom:none;
    }
    // active <a>
    li.crm-tab-button.ui-state-active .ui-tabs-anchor {
      background: $colourWidgetBackground;
      background: white;
      color: black;
      border-bottom:none;
      font-weight: bold;
    }
    li.ui-tabs-active {
      // Remove the -1px margin bottom added by jQueryUI
      margin-bottom:0;
    }
  } // }}}
  // The content
  .ui-tabs-panel {
    padding: 1rem;
  }
}
// }}}
// Contact summary tab {{{
.crm-container div.contact_panel {
  display:grid;
  grid-template-columns: repeat(2, minmax(15rem, 1fr));
  grid-gap: 1rem;
  margin-bottom: 1rem;
}

// These containers split left and right sections.
// It's a shame really because it makes for uneven vertical gaps.
// To counter this we do a fake full height thing by setting the background colour.
#crm-container div.contactCardRight,
#crm-container div.contactCardLeft {
  width: auto;
  background: $colourWidgetBackground;
  border-left: solid 1px $colourWidgetBorder;
  // Keep all content at this height.
  // &>div, &>div>div, &>div>div>div { height: 100%; }
}
.crm-summary-block {
  margin-bottom: 1px;
}

// .crm-inline-block-content
//  .crm-summary-row
//    .crm-label
//    .crm-content
#contact-summary {
  .crm-inline-block-content {
    background: white;
    background: $colourWidgetBackground;
    padding:1rem;

    .crm-label {
      font-size: (14rem/16);
    }
  }
}

// This affects things like the fields on the contact summary page
div.crm-summary-row {
  display: flex;
  flex-wrap: wrap;
  margin-bottom: (5rem/16);

  .crm-label { flex: 0 0 8rem;  }
  .crm-content { flex: 1 0 8rem;  }

}

// Make the dividing line sharper and more subtle.
#crm-container .separator {
  border-bottom: solid 1px rgba(0,0,0,0.2);
}



// }}}
// Contributions {{{
table {
  margin:1rem 0;
}
#crm-container th.contriTotalLeft,
#crm-container th.contriTotalRight {
  border:none;
}
// }}}

// Component: Footer {{{
#crm-record-log {
  margin-top: 2rem;
  font-size: (12rem/16);
  opacity: 0.8;
  span { margin-right: 1rem; }
}
//}}}
// other tabs {{{
// }}}
// }}}
// Specific Page: Fix dashboard layout {{{
#civicrm-dashboard {
  display: flex;
  flex-wrap: wrap;
  #column-0 {
    flex: 1 0 40%;
  }
  #column-1 {
    flex: 1 0 60%;
  }
}
// }}}
// Specific Page: Extensions {{{
// Hide the counts in <em> - they don't contain anything
.crm-container .ui-tabs .ui-tabs-nav.crm-extensions-tabs-list  li a em {
  display:none;
}
// }}}
// Specific Page: Admin overview {{{
#id_Customize_Data_and_Screens_show,
#id_Communications_show,
#id_Localization_show,
#id_Users_and_Permissions_show,
#id_System_Settings_show,
#id_CiviContribute_show,
#id_CiviMail_show,
#id_CiviCase_show,
#id_CiviReport_show,
#id_CiviCampaign_show,
#id_CiviMember_show,
#id_CiviEvent_show,
#id_Customize_Data_and_Screens,
#id_Communications,
#id_Localization,
#id_Users_and_Permissions,
#id_System_Settings,
#id_CiviContribute,
#id_CiviMail,
#id_CiviCase,
#id_CiviReport,
#id_CiviCampaign,
#id_CiviMember,
#id_CiviEvent
{
  background: white;
}
// }}}

#crm-container ul.wizard-bar {
  border:none;
}
// This affects a lot, including the content pane of tabbed content.
.ui-widget-content {
  border-color: $colourWidgetBorder;
  background: $colourWidgetBackground;
  background: white;
}


// I don't know why but CiviCRM sets a -10px margin on this that we have to undo.
#crm-container div.crm-summary-contactname-block {
  margin-top:0;
}

#crm-container #civicrm-dashboard h3.widget-header {
  color: $colourText;
}


// @todo comments
.crmMailing .preview-popup, .crmMailing .preview-contact, .crmMailing .preview-group {
  height:6rem;
}

.crm-tag-item {
  line-height:1.25;
}

// The default font size for data on contact screens etc. is 11px!
.crm-container div.crm-clear {
  font-size:inherit;
}


.crm-container .crm-form-block {
  background-color: white;
  padding: 1rem;
}

.crm-container input { box-sizing: border-box; }


#secondaryTabContainer {
  border:none;
  padding:0;
}



// /// Calm bootstrap a bit.
// /body#bootstrap-theme, #bootstrap-theme {
// /  font-family: inherit;
// /  font-size: inherit;
// /  color: inherit;
// /  background-color: inherit;
// /}
// /#bootstrap-theme {
// /  @each $h in h1 h2 h3 h4 h5 h6 {
// /    #{$h} {
// /      small, .small {
// /        color:inherit;
// /      }
// /    }
// /  }
// /}
// /
